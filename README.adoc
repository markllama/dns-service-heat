== DNS Service for OpenStack with Heat

This repository defines a simple distributed DNS service within an
OpenStack Heat stack.  The goal is to de-mystify DNS services and
deployments for low level delegated sub-domains.  It is NOT to provide
enterprise scale and quality DNS services.

== Inputs

== Deploying

----
openstack stack create -e dns_service_parameters.yaml [-e rhn_credentials.yaml] -t dns_service.yaml dns-service

----
----
openstack stack create -e dns_service_parameters.yaml -e rhn_credentials.yaml \
  -t dns_service.yaml  dns-service
----

----
openstack server ssh -i ~/osp-keys/ocp3_rsa -l cloud-user -o StrictHostKeyChecking=no \
  ns-master.dns.example.com
----


== Deploying On An Existing Network

----
openstack stack create \
  --parameter external_network=public_network \
  --parameter dns_nameservers=10.19.114.41,10.19.114.2,10.11.5.19 \
  -t dns_network.yaml \
  dns-network
----

----
openstack stack create -e dns_servers_parameters.yaml -e rhn_credentials.yaml  -t dns_servers.yaml  dns-servers
----

== Extracting server hostname and IP addresses

----
openstack server show ns-master.dns.example.com -f json | jq '.name'
----

----
openstack server show ns-master.dns.example.com -f json | jq '.addresses' | tr -d \"
----
